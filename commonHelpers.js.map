{"version":3,"file":"commonHelpers.js","sources":["../src/js/utils/load-more-service.js","../src/js/utils/constants.js","../src/js/pixabay-api.js","../src/js/utils/lightbox.js","../src/js/render-functions.js","../src/js/utils/toast.js","../src/js/handler.js","../src/main.js"],"sourcesContent":["export default class LoadMoreService {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl, loaderEl) {\n    this.button = buttonEl;\n    this.loader = loaderEl;\n  }\n\n  init(){\n    this.hideBtn();\n    this.setLoaderNormal();\n    this.hideLoader();\n  }\n  hideBtn() {\n    this.button.classList.add(LoadMoreService.HIDDEN_CLASS);\n  }\n\n  showBtn() {\n    this.button.classList.remove(LoadMoreService.HIDDEN_CLASS);\n  }\n\n  hideLoader() {\n    this.loader.classList.add(LoadMoreService.HIDDEN_CLASS);\n  }\n\n  showLoader() {\n    this.loader.classList.remove(LoadMoreService.HIDDEN_CLASS);\n  }\n\n  setLoading() {\n    this.hideBtn();\n    this.showLoader();\n  }\n\n  showLoaderNoMoreElement() {\n    this.loader.textContent = \"We're sorry, but you've reached the end of search results.\";\n    this.showLoader()\n  }\n\n  setLoaderNormal() {\n    this.loader.textContent = \"Loading images, please wait...\";\n  }\n}\n\n","import LoadMoreService from './load-more-service.js';\n\nexport const searchFormEl = document.querySelector('.js-search-form');\nexport const galleryEl = document.querySelector('.js-gallery');\nexport const loadMoreBtnEl = document.querySelector('.js-load-more');\nexport const loaderEl = document.querySelector('.loader')\n\nexport const params = {\n  page: 1,\n  perPage: 15,\n  maxPage: 1,\n  query: '',\n};\nexport const loadMoreService = new LoadMoreService(loadMoreBtnEl, loaderEl);\n","import axios from 'axios';\n\nconst API_KEY = '46431994-a635163271497b221c43ba27b';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nasync function getPhotos({ page, perPage, query }) {\n\n  const res = await axios.get('api/', {\n    params: {\n      key: API_KEY,\n      q: encodeURIComponent(query),\n      page,\n      per_page: perPage,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n\n  return res.data;\n}\n\nexport { getPhotos };\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nexport { lightbox }\n","import { lightbox } from './utils/lightbox.js';\nimport { galleryEl } from './utils/constants.js';\n\nfunction createCardsMarkup(cards) {\n  return cards\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-card\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                class=\"gallery-img\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                />\n           </a>\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n            <p class=\"info-item\"><b>Views</b> ${views}</p>\n            <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n            <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n          </div>\n        </li>`,\n    )\n    .join('');\n}\n\nfunction updateGallery(data) {\n  const photosMarkup = createCardsMarkup(data.hits);\n  galleryEl.insertAdjacentHTML('beforeend', photosMarkup);\n  lightbox.refresh();\n}\n\nfunction configureScroll() {\n  const galleryItem = document.querySelector('.gallery-card');\n  if (!galleryItem) return;\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport {updateGallery, configureScroll};","import 'izitoast/dist/css/iziToast.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst icons = {\n  ok: new URL('../../img/ok.svg', import.meta.url).href,\n  error: new URL('../../img/error.svg', import.meta.url).href,\n};\n\nexport function showErrorToast(message) {\n  iziToast.error({\n    title: '',\n    backgroundColor: '#ef4040',\n    iconUrl: icons['error'],\n    timeout: 3000,\n    messageColor: '#fff',\n    titleColor: '#fff',\n    maxWidth: '438px',\n    messageSize: '16px',\n    titleSize: '16px',\n    position: 'topRight',\n    message: message,\n    close: false,\n  });\n}\n\nexport function showOkToast(message) {\n  iziToast.success({\n    title: '',\n    backgroundColor: '#59a10d',\n    iconUrl: icons['ok'],\n    messageColor: '#fff',\n    titleColor: '#fff',\n    messageSize: '16px',\n    titleSize: '16px',\n    position: 'topRight',\n    message: message,\n  });\n}\n","import { galleryEl, loadMoreService, loadMoreBtnEl, params } from './utils/constants.js';\nimport { getPhotos } from './pixabay-api.js';\nimport { configureScroll, updateGallery } from './render-functions';\nimport { showErrorToast } from './utils/toast.js';\n\nexport async function handleSearch(event) {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  params.page = 1;\n  loadMoreService.init();\n\n  const form = event.currentTarget;\n  const userQuery = form.elements.user_query.value.trim();\n  if (userQuery === '') {\n    showErrorToast('Search can\\'t be empty');\n    form.reset();\n    return;\n  }\n  params.query = userQuery;\n\n  try {\n    loadMoreService.showLoader();\n    const data = await getPhotos(params);\n    loadMoreService.hideLoader();\n\n    if (data.total === 0) {\n      galleryEl.innerHTML = '';\n      showErrorToast('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    params.maxPage = Math.ceil(data.total / params.perPage);\n\n    updateGallery(data);\n    if (params.maxPage > params.page) {\n      loadMoreService.showBtn();\n      loadMoreBtnEl.addEventListener('click', handleLoadMore);\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n  params.page += 1;\n\n  try {\n    loadMoreService.setLoading();\n    const data = await getPhotos(params);\n    loadMoreService.hideLoader();\n\n    updateGallery(data);\n    configureScroll();\n\n    if (params.maxPage === params.page) {\n      loadMoreService.showLoaderNoMoreElement();\n      loadMoreBtnEl.removeEventListener('click', handleLoadMore);\n    } else {\n      loadMoreService.showBtn();\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}","import { handleSearch } from './js/handler.js';\nimport { searchFormEl } from './js/utils/constants.js';\n\nsearchFormEl.addEventListener('submit', handleSearch);\n"],"names":["_LoadMoreService","buttonEl","loaderEl","__publicField","LoadMoreService","searchFormEl","galleryEl","loadMoreBtnEl","params","loadMoreService","API_KEY","axios","getPhotos","page","perPage","query","lightbox","SimpleLightbox","createCardsMarkup","cards","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","data","photosMarkup","configureScroll","galleryItem","cardHeight","icons","showErrorToast","message","iziToast","handleSearch","event","form","userQuery","handleLoadMore","err"],"mappings":"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"}