{"version":3,"file":"commonHelpers.js","sources":["../src/js/utils/constants.js","../src/js/utils/btn-service.js","../src/js/pixabay-api.js","../src/js/utils/lightbox.js","../src/js/render-functions.js","../src/js/utils/toast.js","../src/js/handler.js","../src/main.js"],"sourcesContent":["export const searchFormEl = document.querySelector('.js-search-form');\nexport const galleryEl = document.querySelector('.js-gallery');\nexport const loadMoreBtnEl = document.querySelector('.js-load-more');\n\nexport const params = {\n  page: 1,\n  perPage: 15,\n  maxPage: 1,\n  query: '',\n};","export default class ButtonService {\n  static HIDDEN_CLASS = 'is-hidden';\n\n  constructor(buttonEl) {\n    this.button = buttonEl;\n    this.prevText = '';\n  }\n\n  disable() {\n    this.button.disabled = true;\n  }\n\n  enable() {\n    this.button.disabled = false;\n  }\n\n  hide() {\n    this.button.classList.add(ButtonService.HIDDEN_CLASS);\n  }\n\n  show() {\n    this.button.classList.remove(ButtonService.HIDDEN_CLASS);\n  }\n\n  setLoading() {\n    this.disable();\n    this.prevText = this.button.textContent;\n    this.button.textContent = 'Loading...';\n  }\n\n  setNormal() {\n    this.button.textContent = this.prevText;\n    this.enable();\n  }\n}\n","import axios from 'axios';\n\nconst API_KEY = '46431994-a635163271497b221c43ba27b';\n\naxios.defaults.baseURL = 'https://pixabay.com';\nasync function getPhotos({ page, perPage, query }) {\n\n  const res = await axios.get('api/', {\n    params: {\n      key: API_KEY,\n      q: encodeURIComponent(query),\n      page,\n      per_page: perPage,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n\n  return res.data;\n}\n\nexport { getPhotos };\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\nexport { lightbox }\n","import { lightbox } from './utils/lightbox.js';\nimport { galleryEl } from './utils/constants.js';\n\nfunction createCardsMarkup(cards) {\n  return cards\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"gallery-card\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                class=\"gallery-img\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                />\n           </a>\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n            <p class=\"info-item\"><b>Views</b> ${views}</p>\n            <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n            <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n          </div>\n        </li>`,\n    )\n    .join('');\n}\n\nfunction updateGallery(data) {\n  const photosMarkup = createCardsMarkup(data.hits);\n  galleryEl.insertAdjacentHTML('beforeend', photosMarkup);\n  lightbox.refresh();\n  configureScroll();\n}\n\nfunction configureScroll() {\n  const galleryItem = document.querySelector('.gallery-card');\n  if (!galleryItem) return;\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport {updateGallery};","import 'izitoast/dist/css/iziToast.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst icons = {\n  ok: new URL('../../img/ok.svg', import.meta.url).href,\n  error: new URL('../../img/error.svg', import.meta.url).href,\n};\n\nexport function showErrorToast(message) {\n  iziToast.error({\n    title: '',\n    backgroundColor: '#ef4040',\n    iconUrl: icons['error'],\n    timeout: 3000,\n    messageColor: '#fff',\n    titleColor: '#fff',\n    maxWidth: '438px',\n    messageSize: '16px',\n    titleSize: '16px',\n    position: 'topRight',\n    message: message,\n    close: false,\n  });\n}\n\nexport function showOkToast(message) {\n  iziToast.success({\n    title: '',\n    backgroundColor: '#59a10d',\n    iconUrl: icons['ok'],\n    messageColor: '#fff',\n    titleColor: '#fff',\n    messageSize: '16px',\n    titleSize: '16px',\n    position: 'topRight',\n    message: message,\n  });\n}\n","import { galleryEl, loadMoreBtnEl, params } from './utils/constants.js';\nimport ButtonService from './utils/btn-service';\nimport { getPhotos } from './pixabay-api.js';\nimport { updateGallery } from './render-functions';\nimport { showErrorToast } from './utils/toast.js';\n\nconst loadMoreBtnService = new ButtonService(loadMoreBtnEl);\n\nexport async function handleSearch(event) {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  params.page = 1;\n\n  loadMoreBtnService.hide();\n\n  const form = event.currentTarget;\n  const userQuery = form.elements.user_query.value.trim();\n  if (userQuery === '') {\n    showErrorToast('Search can\\'t be empty');\n    form.reset();\n    return;\n  }\n  params.query = userQuery;\n\n  try {\n    document.getElementById('loader').style.display = 'flex';\n    const data = await getPhotos(params);\n\n    if (data.total === 0) {\n      galleryEl.innerHTML = '';\n      showErrorToast('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    params.maxPage = Math.ceil(data.total / params.perPage);\n\n    updateGallery(data);\n\n    if (params.maxPage > params.page) {\n      loadMoreBtnService.show();\n      loadMoreBtnEl.addEventListener('click', handleLoadMore);\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    document.getElementById('loader').style.display = 'none';\n    form.reset();\n  }\n}\n\nasync function handleLoadMore() {\n\n  loadMoreBtnService.setLoading();\n  params.page += 1;\n\n  try {\n    const data = await getPhotos(params);\n\n    updateGallery(data);\n    loadMoreBtnService.setNormal();\n\n    if (params.maxPage === params.page) {\n      loadMoreBtnService.hide();\n\n      loadMoreBtnEl.removeEventListener('click', handleLoadMore);\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}","import { handleSearch } from './js/handler.js';\nimport { searchFormEl } from './js/utils/constants.js';\n\nsearchFormEl.addEventListener('submit', handleSearch);\n"],"names":["searchFormEl","galleryEl","loadMoreBtnEl","params","_ButtonService","buttonEl","__publicField","ButtonService","API_KEY","axios","getPhotos","page","perPage","query","lightbox","SimpleLightbox","createCardsMarkup","cards","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","data","photosMarkup","configureScroll","galleryItem","cardHeight","icons","showErrorToast","message","iziToast","loadMoreBtnService","handleSearch","event","form","userQuery","handleLoadMore","err"],"mappings":"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"}